fn solve1(data: String) -> i32 {
    let parsed = parse(data);
    let shape_score : i32 = parsed.iter().map(|p| p.1).sum();
    let win_score : i32 = parsed.iter().map(|p| match p.1-p.0 {
        0 => 3,
        1 => 6,
        2 => 0,
        -1 => 0,
        -2 => 6,
        _ => panic!("unexpected number")
    }).sum();
    shape_score + win_score
}

fn solve2(data: String) -> i32 {
    let parsed = parse(data);
    let shape_score : i32 = parsed.iter().map(|p| match p {
        (x, 1) => (x+2) % 3,
        (x, 2) => *x,
        (x, 3) => (x+1) % 3,
        _ => panic!("unexpected number")
    }).map(|s| if s == 0 {3} else {s}).sum();
    let win_score : i32 = parsed.iter().map(|p| (p.1 - 1) * 3).sum();
    shape_score + win_score
}

fn parse(input: String) -> Vec<(i32, i32)> {
    let games = input.split("\n");
    games.map(|e| {
        let pair: Vec<&str> = e.split(" ").collect();
        (pair[0].chars().next().unwrap() as i32 - 'A' as i32 + 1, pair[1].chars().next().unwrap() as i32 - 'X' as i32 + 1)
    }).collect()
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn example1() {
        let result = solve1(input_example());
        assert_eq!(result, 15);
    }

    #[test]
    fn exercise1() {
        let result = solve1(input_exercise());
        assert_eq!(result, 13009);
    }

    #[test]
    fn example2() {
        let result = solve2(input_example());
        assert_eq!(result, 12);
    }

    #[test]
    fn exercise2() {
        let result = solve2(input_exercise());
        assert_eq!(result, 10398);
    }

    fn input_example() -> String {
        "A Y
B X
C Z".to_string()
    }

    fn input_exercise() -> String {
        "A Y
B X
C X
A Z
B Y
C X
C X
C X
C X
C X
A Z
B Y
C X
A Z
A Z
B Y
A Z
B X
C Z
C X
C X
B Y
C X
A X
B Y
B Z
A Z
B Y
C X
C X
C X
A Z
B Y
C X
A Z
C X
B Y
C X
C X
B Y
A Z
A Z
C X
C X
A Y
B X
C X
B X
C X
C X
A Z
C Z
C X
A Y
B Y
B Y
B X
C X
C X
C X
A Y
A Z
C X
A Z
C X
B Y
C X
C X
C X
C X
A Z
C X
A Z
C X
C X
B Y
C X
B Y
A X
A Y
C Y
A Z
C X
C X
A X
A Z
A X
C X
C X
A X
C X
B Y
A Z
A Y
A Z
B X
C X
B X
C X
C X
A Z
C X
C Z
C X
C X
C X
C X
C X
A Z
A X
C X
A Z
C X
C X
A Z
C X
A Z
A Y
C X
C X
A Z
A Z
C X
C X
A Z
A Z
C Z
C X
A Z
A Z
C X
B Y
C X
C X
A Y
A Z
A Z
A Z
A Y
B Y
A Z
C X
A Y
A Z
A Y
A Z
C X
C X
C X
B X
B Y
A Z
A Z
A Z
C X
A Z
A X
B X
C X
C X
C X
A Z
A Z
A Z
C X
C X
A X
A Z
C Y
A Z
C X
C X
C Z
C X
A Z
A X
C Y
A X
C X
C X
C X
A X
A X
C X
A Z
A Z
A Z
A Z
A Z
A Y
C X
A Z
A Z
A Z
B Y
C X
C X
A X
B X
A Z
C X
A Z
C X
A Z
C X
A Z
A Y
C X
C X
C X
A Y
C X
C Y
C Z
C X
C X
B Y
C X
A Z
C Z
A Z
C X
A Y
B Y
C X
C X
C X
B X
A Z
C X
C X
C X
B X
A Z
A Z
C X
C X
C X
A Z
A X
B Y
C Y
C X
A Z
A Z
A Z
B Y
B X
C X
A Z
A Y
B Z
C X
C X
A Z
A X
C X
A Z
B Y
A Z
C Z
B X
A Z
C X
C X
C X
A Y
C X
C X
A Z
A X
C Z
A Y
C X
C X
A Y
A X
B Y
C X
C X
C X
A Z
A X
C X
A X
A X
C X
C X
A Z
C X
A Z
A X
A Z
C X
B Y
A Z
C X
A Z
A X
B X
C X
B Y
A Y
A Y
C Z
B Z
C X
C X
C X
A Z
C Z
A Y
C X
A Y
C Z
A Y
B Y
C X
C X
A Z
B Y
C X
A Z
C X
C X
A Z
B Y
C X
B Y
C X
B Y
A Y
C X
A X
A X
B X
C X
A Z
C X
B Y
A Y
C X
B Y
B X
C X
C X
A Z
B X
A X
C X
C X
B Y
C Z
B X
C X
A Z
A Z
A X
C X
A Z
C X
A Z
C X
A Z
C X
A Z
A Y
A Y
C Z
C X
A X
C X
A Z
C X
B X
A Z
A Y
A Z
C X
A Z
C X
B Y
A X
C X
A Y
C X
C X
C X
A Z
A Y
C X
A X
C X
A Z
C X
C X
A Y
C X
C X
C X
A Z
A Z
C X
A Z
B X
A Z
C X
B Y
B X
C X
B Y
A Z
A X
C X
A Y
A X
A Z
B Y
A X
C X
C X
C X
C X
A Z
C X
C X
A X
A Z
A Z
B Y
A Z
A X
A Z
C X
B X
A Y
A X
A Y
C X
A Z
C X
A Z
B X
A Y
C X
C X
A Z
A Z
C X
C Y
A Z
A Z
A Z
A Y
C X
C X
A Z
A Z
A Z
B Y
C X
A Z
C X
A Y
A Z
A Z
A Z
C X
A X
A Z
A Z
B Y
B X
A Z
A X
C X
C X
A Z
A Z
C X
A X
A Z
C X
A X
C X
A Z
A Y
C X
B Y
B Y
C X
C X
C X
C X
C X
A X
A X
A Y
A Z
A X
C X
A X
A Z
B Y
A X
A X
C X
A Z
C X
C X
C X
A Z
A X
A X
C X
C X
C X
C X
C X
C X
A Z
C X
C X
C Z
C X
A Z
A Z
C X
C X
A Z
A Z
C X
A Z
A Z
A Z
A Z
C X
A X
C X
B Y
C X
A X
A X
A Y
C X
A Y
A Z
C X
C X
C Z
C X
C X
C X
B X
C X
C X
C X
A Y
C X
C X
A Z
C X
A Y
C X
C Z
C X
C X
B X
A Z
C X
C X
C X
C X
C X
B X
A Z
C X
A Z
B X
B Y
B Y
C X
C X
C Y
A Z
C X
C X
A X
A X
A X
A X
C X
C X
C X
C X
A Z
C X
A Z
A X
C X
C X
B Y
B Y
A Z
C X
A X
A Z
A Z
B Y
C X
C X
A Z
C X
A Z
C X
B X
C X
A Y
C X
C X
A X
B Y
B Y
C Z
C X
C X
B Y
A X
C X
C X
A X
A Z
C X
C X
A Z
B Y
A Z
C X
C X
A X
A X
C X
C Z
C X
A Z
B X
C X
B Y
A Y
B X
A Z
A Z
A X
A Z
A Y
A Z
A X
A Z
C X
C X
A Z
B Y
A Z
B X
B Y
A Z
C X
C Y
A Z
C X
C X
A X
A Z
A X
C X
C X
A Z
C X
C X
C X
C X
A X
B X
A Z
A Z
C X
A X
A X
C X
C X
A Z
A Z
C X
C X
A X
A Z
C X
A X
A Z
A Z
C X
A Z
A Z
C X
C X
A Z
C X
C X
A Z
C X
C X
A Z
A X
C X
C X
A Z
A Z
C X
C X
C X
A Y
C X
C X
B Y
C X
C X
C X
C X
A Z
A Z
A X
C X
A X
C X
A Z
B X
A Z
C X
C X
A Z
A Y
C X
C X
A Z
C X
B X
B X
B Y
A Y
A Y
A Z
A Z
A Z
C X
C X
A Z
C X
B Y
C X
B Z
A Z
C X
A Z
C X
C X
C X
C X
A Z
B X
A Y
C X
A X
A Z
B Y
A X
C X
C X
C X
C X
C X
A Z
A X
A Z
A X
A Z
A Z
C X
A X
C X
B X
C Z
A X
B X
A Y
C X
A Z
A Z
B X
B Y
B Y
C X
A Z
A X
C X
C X
B Z
B X
B Y
A Z
B Y
A Z
C X
A Z
A X
A Z
C X
C X
C X
A X
C X
A Z
C X
C X
C Y
B X
C X
A X
C X
A X
A Z
C Z
A Z
C X
A Y
C X
C X
B Y
C X
C X
A Z
C X
C X
C X
A Z
C Y
C X
A X
A Z
A X
C X
A Z
A Z
B Y
B X
A Z
C X
A Z
C X
A X
C X
C Y
A Z
A Y
C Z
C X
C Z
A Z
A Z
C X
C X
A Y
A X
B Y
C X
A Y
C X
A Y
C X
A Z
B X
A Y
C X
B X
A Z
C X
A Z
A Z
A Y
A Z
A X
B Y
C X
C X
C X
A Z
A X
C X
A Y
A Y
C X
A Z
C X
C Y
C X
C X
A X
A Z
A X
A X
C X
A X
A Z
C X
A Y
A Y
C X
B Y
A Y
C X
A Z
A Z
A X
C X
A Y
C X
C X
C X
C X
A Y
A Z
B Y
A X
A Y
C X
C X
C X
B X
A Z
C X
C X
B X
A Z
A X
C X
A X
C X
B Y
A Z
C X
C X
B X
A Z
A Z
A Z
C X
C X
C X
C Y
C X
C X
A Z
C X
A Z
C X
C X
B X
A X
A Z
C X
B Z
C X
C X
A X
A Y
C X
A Z
A Z
C X
C X
C X
C X
C X
C X
B Y
A Z
C X
A X
A Z
A Z
C X
C X
C X
A Z
C X
B Y
A Z
A Z
C X
C X
C X
C X
A Z
C X
A Z
A Y
A X
C X
A Z
C X
C X
A Z
A Z
A X
A Z
C X
A Z
A X
A Z
C X
C X
C Z
A X
C X
C X
A X
A X
C X
A Z
A Z
A Z
C X
C X
A Z
B Z
A Z
A Z
C X
A Z
C X
A Z
B X
C X
A Z
B Y
B Y
C X
A X
A Z
C X
C X
A Z
C Y
B Y
A Z
C X
C X
A Z
A Z
C Z
A Z
C X
C X
A Y
C X
A Y
B X
C Z
C X
A Y
C X
B Y
C X
C X
C Z
A Z
A Z
C X
C X
A Z
B Z
C X
A Z
C X
A Z
C X
C X
C Y
C X
B Y
A X
A Z
C X
B Y
A Z
B Y
C X
C Y
C Z
A X
A Z
A X
C X
C X
A Z
A Z
C X
C X
C X
C X
B Y
B Y
A Y
C X
C X
C X
A X
C X
B Y
A Z
B Y
C X
C X
B Y
C X
B Y
C X
C X
C X
A Z
A Z
C X
C X
B Z
A X
C X
C X
A Z
C X
C X
C X
C X
A Z
C X
A Y
A Z
C X
A Z
A Y
C X
A X
C Y
A Y
A Y
C X
C X
A X
A Y
C X
B Y
A Z
B Y
C X
B X
C X
C X
C X
B Z
A Y
C X
B Y
C X
A X
C X
C X
B X
A Z
C X
A Z
C X
C X
C X
C X
C X
C X
A X
A Z
A Z
C X
C X
C Z
B X
C Z
C X
B X
C X
A Z
B Y
A Z
C Z
C X
B X
A X
A Z
C X
C X
A Z
A Z
A Z
A X
C X
C X
A Y
A Z
C X
A Z
B Y
C X
C Z
A Z
C X
C X
C X
A X
A Z
A Z
C X
A Y
A Y
C X
C X
C X
C X
C X
A Z
C X
B X
C X
B X
B Y
A Z
C X
B Y
A Y
C Z
A Z
A X
C X
A Z
C X
A Z
C Z
C X
C X
A Z
C X
C X
C X
B Y
A Z
B X
A Z
A Z
B X
A X
A Z
C X
C X
A Y
C X
A Z
B Y
C Y
A Z
C Y
C X
A Z
C X
C X
A X
C X
A X
A Z
B Y
B Y
C X
B Y
C Z
C X
C X
B Y
A Z
C X
C X
C X
C X
C X
A X
A Z
B Y
A Y
C X
C X
C Z
C X
A X
C X
A Z
B Y
A Z
B X
C X
C X
A Z
C X
A Y
A Y
C X
B X
C X
B X
A Y
A Z
A Z
C X
A Z
A X
A Z
C X
C X
C X
A Z
B X
B X
A Z
C X
B Y
C X
C X
A Z
A X
C X
B Y
C X
C X
C X
A X
A X
B Y
A Y
A X
C X
A Z
B X
A Z
B Y
C X
B Y
A Y
C X
C X
C X
A Y
A Z
A Z
A X
A Z
A X
C X
A Z
A Y
A Z
A Z
A Z
A X
A Z
A Z
C X
C X
C X
A Z
C X
C X
B Y
C X
C X
C X
C Y
A Z
A Z
A Z
C X
A Z
B X
A X
A Z
A Y
C X
A Z
C X
A Z
A Y
B Y
C X
A X
A Z
A Z
C Y
A X
B Y
B Y
C X
A Z
A Z
A Z
A Z
A Z
A Z
A Z
C X
C X
B Y
C X
C X
A Y
C X
A Z
C X
A X
C X
A X
C X
C X
B X
C X
B X
C X
C X
A Y
A X
A Z
C X
A X
A Y
A Z
C X
C X
C X
B Y
A Z
A Y
A Z
C X
A Y
B X
C X
A X
A Y
A Y
A Z
A Z
A Z
C X
A Z
A X
A Z
C X
B X
A Z
C X
C X
A X
A Z
A Z
B Y
A Z
A X
A Z
A Z
A Z
A X
B Y
A X
A Z
C X
B X
A Z
A Z
A Y
B Y
A Y
B Y
C X
C X
A Z
B Y
A Z
A X
A Z
A Z
C X
C X
A Z
A X
C X
B Y
C X
C X
C X
C Z
A Y
C X
A Y
A Y
A Y
A Z
A X
A Z
A X
A Z
B Y
C X
A Z
A Y
C X
B Y
A Z
B Y
C X
B X
B Y
C X
A Z
B X
C X
B Y
B Y
C X
C X
A Z
B X
A X
A Z
C X
A Z
C X
C X
A Z
B X
A Z
C Y
C X
A Z
A X
B Y
B Y
C Y
B Y
A Y
C X
A X
C X
C X
C X
A Y
A Z
B Y
A Z
A Y
C X
A Y
A Y
A Y
C X
B X
B X
C X
B X
C X
C X
A X
A X
A X
C X
C X
C Y
A Y
A Z
C X
B Y
C X
A X
C X
A Z
C X
C X
C X
B X
C X
C Z
A Z
C Y
B Y
A Y
A Z
A Z
A X
A Y
C X
C Y
C X
C X
A X
A Y
A Z
C X
B X
B Y
B Y
C X
C X
C X
C X
A Z
C X
C X
B Y
C X
C X
A Z
A Z
A Z
A X
A Y
A Z
C Z
A Z
C X
C X
B Y
A X
C X
A Z
C X
A X
C X
A Z
C X
C X
A Z
A X
C X
C X
C X
A Y
C X
C X
A Z
C X
A Z
C X
A Z
C X
C X
C X
C X
A Z
C X
A Z
C X
A Z
A Z
B Z
A Z
A Y
C X
B X
C X
C X
C Z
C X
C X
C X
A X
A Z
A Z
A Z
C X
C X
C X
A Z
B Y
C X
C X
C X
A Z
C X
A Y
C X
B Y
A Z
C X
B X
C X
A X
C X
C X
C X
A Z
A Z
A Z
B Z
C X
A Z
A X
C X
B X
A X
A Y
B Y
B Y
A Z
C X
C X
C X
C X
A Z
A Z
C X
A X
B Y
B Y
A Z
A Z
C X
C X
A Z
A Y
C X
A Y
A Z
A Y
C X
A Z
C X
A Z
B Y
A X
A Z
C X
A X
C X
A Z
C X
C X
A Z
B X
B X
A Z
C X
A Y
A Z
C X
A X
A X
A Z
A Y
C X
A Z
B Z
C X
A Z
C X
A Z
A Z
C X
A Z
B X
A Z
C X
A Z
A Z
C X
C X
A X
A Z
A Z
C X
A Z
C X
A Z
C X
A X
A Z
A Z
C Z
C X
C X
B Y
B Y
C X
C X
C X
B X
A X
C X
A X
B Y
C X
B Y
A Z
A Z
A Y
A Z
B X
A X
C X
B Y
C X
A Z
C X
C X
A Z
A X
C X
C X
A Z
B Y
C X
A Z
B Y
A Z
A Z
A X
C X
A Z
C X
B Y
C X
C X
C X
A X
B Y
C X
A X
C X
A Z
C X
C X
B X
B X
C X
C X
A Z
B X
C X
A X
C X
B Y
A Y
C Z
C X
A Z
C Z
B Y
B Y
A Z
C Z
C X
C X
C X
A X
C X
A Z
B X
A Z
B Y
A Z
B X
A X
A Z
A Z
C X
B X
C X
A Z
B Y
A Z
C X
A Z
A Z
A X
A Z
A X
A X
C X
B X
C X
C X
B Y
C X
C X
A X
C X
C X
C X
C X
C X
A Z
C X
C X
A Z
A Z
B Y
C X
C Z
C X
B Y
C X
C X
C X
A Z
A Y
A X
C X
C X
B Y
C Z
C X
A Y
B Y
C X
C X
A Z
A Z
C X
C X
C X
B X
C X
C X
C X
C X
B Y
A X
C X
C X
A Z
C X
C X
C X
A Z
C X
C X
B Y
C X
A Y
C X
A Z
A Z
B Y
C X
C Y
A Y
C X
B Y
A Z
B X
C X
C X
A X
C X
C X
C X
C X
A X
A X
A Z
C X
B Z
C X
A Y
A Z
A Z
C X
C X
C X
A Z
A Z
A X
A Z
A Z
A Z
A Y
A X
A Z
C X
B Y
C X
A Z
C X
C Z
B X
C X
C X
A Z
A X
B X
C X
A Z
A Z
A Z
C Z
C X
B Y
C X
C X
C X
A Z
B Y
C X
C X
C X
C X
C X
C X
A X
C Z
B Y
A X
A X
B X
C X
C X
C X
A Z
A Z
B X
C X
C X
A Z
C X
A Z
C X
C X
C X
C X
A Z
C Y
C X
C X
A Z
A Z
A Z
A Y
A X
A X
C X
A Z
B X
A Z
C X
B X
C X
A Y
A X
C X
C X
C X
B X
B X
C X
A Z
A Z
C X
C X
A Z
B X
A Z
A Y
A X
A Y
C X
A Z
B Y
C X
A Z
C X
C X
A Z
A Z
A Y
B X
A Z
C X
A X
A Z
A Z
A Z
A X
C X
A Z
A Z
B X
A Y
C X
C X
C X
C X
B X
B Y
C X
A Z
C X
B Y
B Y
C X
B X
A Z
C X
C X
A Z
B Y
C X
A Z
C X
C X
A Z
C X
A Z
A X
C X
C X
A X
A Z
C X
A X
C X
C X
A X
C X
A X
A Y
A Z
A Y
A Z
C X
A Z
A Z
B Z
A Y
A Z
C X
A Z
C X
A X
C X
C Y
C X
C X
C X
A Z
B X
C X
C X
A Z
A Z
C Z
C X
A X
A Y
B Y
A Z
A X
B X
C X
C X
C X
A Y
C X
A Z
C X
C X
A Z
A X
C X
C Z
C X
C X
C X
A Z
A Y
C X
C X
A Z
C X
C Y
C X
C X
A Z
A X
C X
B X
A Z
A Z
C X
A Z
A Z
C X
A Y
C Y
A Z
A Z
B X
C X
A Z
A Z
C X
C X
C X
B Y
A Z
B Y
C X
B X
A X
C X
A Z
A Y
C X
A Z
C Z
A X
C X
A Z
C X
C X
A Z
C X
A Y
C X
C X
A Y
C X
B X
C X
C X
B Y
A X
C X
A Y
B Y
C X
A X
A Z
C Z
A X
C X
C X
B X
A Z
B Z
A Z
A X
A Y
C X
A X
B X
C X
C X
C X
C X
A Z
C X
A Z
A Z
C X
B X
C X
A Y
A Z
A X
A X
C X
A Y
C X
C X
A Y
C X
B X
A Z
C X
A Z
B X
A Z
B Y
C X
C X
C X
A Z
C X
C X
A X
C X
A Z
C X
C X
A Z
C X
A X
B Y
A Y
C X
C X
C X
A X
C X
A Z
C X
A X
C X
C X
A Y
C X
C X
C X
C X
A Z
C X
C X
A Y
A Z
C X
C X
C X
A Z
A Z
C Z
A Y
C X
C X
B Z
B Y
B Y
B Y
C Z
B Y
A Z
B X
C X
A Z
A Y
C X
B Y
C X
A X
B X
A Z
A Z
C X
C Y
A Z
B Y
A Z
A Z
C X
C X
B Y
C X
A Z
C Z
A X
C X
C X
C X
A Z
C X
B X
B Y
C X
A Z
A Z
C X
A Z
C Z
C X
B X
A X
B Z
A Z
C X
A X
C X
C X
C X
C X
A Z
C X
C X
C X
C X
A Z
A Z
C X
C X
A X
A Z
C X
A X
C X
C Y
C X
A Z
B X
A Y
A Z
C Y
A Z
C X
A Y
C X
A X
C X
A X
C X
A Z
C X
A X
A Z
A X
A Y
C Z
C X
A X
A Z
A Z
A Z
A Z
C X
C X
C Z
A X
A Z
B Y
A Z
A Z
B X
B Y
A X
A Y
A Z
C X
A Z
C X
A Z
B X
B X
C X
C X
C X
A X
C X
A Z
B X
A Y
B X
C X
A X
C X
A X
A Z
A Z
A Z
C X
B Y
C X
B Y
C X
A Z
A Z
A Z
C X
C X
B Y
A Y
C Y
A Z
C X
C X
A Z
C X
A Z
C Z
B X
C X
C X
A Z
B Y
A Y
C X
A X".to_string()
    }
}
